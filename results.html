<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quiz Results</title>
  <link rel="stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* Optional inline CSS for layout tweaks */
    
    /* Center everything in the container */
    .container {
      text-align: center;
    }

    /* Constrain text width for nicer reading */
    .info-text {
      max-width: 550px;
      margin: 0 auto 15px auto;
      font-size: 16px;
      color: #333;
      line-height: 1.4;
    }

    /* Make the persona image look nice */
    #persona-image {
      max-width: 300px;
      border-radius: 10px;
      margin: 15px auto;
      display: block;
    }

    /* Optional: style the volunteer icons for "Issue Focus Actions" */
    .volunteer-button {
      display: inline-block;
      text-decoration: none;
      color: #000;
      margin: 10px;
      padding: 5px;
      border: 2px solid transparent;
      border-radius: 8px;
      transition: border-color 0.3s ease, transform 0.3s ease;
      cursor: pointer;
      width: 110px; /* adjust as needed */
      text-align: center;
    }
    .volunteer-button:hover {
      border-color: #007BFF;
      transform: scale(1.05);
    }
    .focus-icon {
      width: 80px;
      height: auto;
      border-radius: 8px;
      display: block;
      margin: 0 auto;
    }

    /* Center the "Copy Organizations" button at the bottom */
    #copy-button {
      margin: 20px auto;
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Your Activist Type</h1>
    
    <div id="result-container" style="display:none;">
      <!-- The userâ€™s chosen type and description -->
      <h2 id="result-title"></h2>
      <p id="result-description" class="info-text"></p>
      <img id="persona-image" src="" alt="Your Activist Persona" />

      <!-- Issue Focus Actions -->
      <h3>Issue Focus Actions</h3>
      <div id="issue-focus-container" class="button-group">
        <!-- Page-2 icons appear here via JS -->
      </div>

      <!-- Quick Activist Actions -->
      <h3>Quick Activist Actions</h3>
      <div class="button-group">
        <a href="#" id="org1" class="result-btn green" target="_blank">Action 1</a>
        <a href="#" id="org2" class="result-btn green" target="_blank">Action 2</a>
      </div>

      <!-- Deeper Engagement -->
      <h3>Deeper Engagement</h3>
      <div class="button-group">
        <a href="https://upliftservicenetwork.com/activist-matching/" class="result-btn blue" target="_blank">Get Matched</a>
        <a href="https://upliftservicenetwork.com/log-in-2/" class="result-btn blue" target="_blank">Learn More</a>
      </div>

      <!-- Copy Organizations Button (Green) -->
      <button id="copy-button" class="result-btn green">Copy Organizations</button>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // 1) Retrieve the userâ€™s chosen type & focuses from localStorage
      const storedType = localStorage.getItem("activistType") || "Uncategorized";
      const selectedFocuses = JSON.parse(localStorage.getItem("activistFocus")) || [];

      // 2) Grab references to the DOM elements
      const resultContainer = document.getElementById("result-container");
      const resultTitle = document.getElementById("result-title");
      const resultDescription = document.getElementById("result-description");
      const resultImage = document.getElementById("persona-image");
      const focusContainer = document.getElementById("issue-focus-container");
      const copyButton = document.getElementById("copy-button");

      // 3) Define your activist types (with image, orgs, etc.)
      const activistTypes = {
        "Frontline Mobilizer": {
          emoji: "ðŸ”¥",
          description: "You are the spark that ignites change! When injustice strikes, you step upâ€”marching, protesting, and standing boldly on the front lines.",
          image: "images/frontline_firestarter.png",
          organizations: [
            { name: "Black Lives Matter", link: "https://blacklivesmatter.com/take-action/" },
            { name: "Sunrise Movement", link: "https://www.sunrisemovement.org/take-action/" }
          ]
        },
        "Resource Builder": {
          emoji: "ðŸ’°",
          description: "You provide the funding, materials, and resources that movements need to thrive.",
          image: "images/resource_builder.png",
          organizations: [
            { name: "World Central Kitchen", link: "https://wck.org/fundraise" },
            { name: "Trevor Project Fundraiser", link: "https://www.thetrevorproject.org/fundraise/" }
          ]
        },
        // ... Repeat for all 7 types ...
      };

      // 4) Define the 15 focus areas (page-2 icons)
      const focusMapping = [
        { name: "Healthcare Reform", image: "images/healthcare_reform.png", link: "https://www.pih.org/get-involved" },
        { name: "Criminal Justice", image: "images/criminal_justice.png", link: "https://www.sentencingproject.org/advocacy/get-involved/" },
        { name: "Education Rights", image: "images/education_rights.png", link: "https://www.communitiesinschools.org/ways-to-get-involved/" },
        // ... etc. Make sure to include all 15 from your snippet ...
      ];

      // 5) Display the userâ€™s type
      if (activistTypes[storedType]) {
        // Show "emoji + type" as the heading
        resultTitle.textContent = activistTypes[storedType].emoji + " " + storedType;
        resultDescription.textContent = activistTypes[storedType].description;
        resultImage.src = activistTypes[storedType].image;

        // Populate the Quick Activist Actions (2 green buttons)
        const [org1, org2] = activistTypes[storedType].organizations;
        document.getElementById("org1").textContent = org1.name;
        document.getElementById("org1").href = org1.link;
        document.getElementById("org2").textContent = org2.name;
        document.getElementById("org2").href = org2.link;
      } else {
        // If no match
        resultTitle.textContent = storedType;
        resultDescription.textContent = "We couldn't match your activist style. Please try again.";
      }

      // 6) Display the userâ€™s chosen focuses from page 2
      selectedFocuses.forEach(focusName => {
        const match = focusMapping.find(f => f.name === focusName);
        if (match) {
          // Create a clickable icon
          const volunteerLink = document.createElement("a");
          volunteerLink.href = match.link;
          volunteerLink.target = "_blank";
          volunteerLink.classList.add("volunteer-button");
          volunteerLink.innerHTML = `
            <img src="${match.image}" alt="${match.name}" class="focus-icon"/>
            <p>${focusName}</p>
          `;
          focusContainer.appendChild(volunteerLink);
        }
      });

      // 7) Reveal the results container
      resultContainer.style.display = "block";

      // 8) Handle "Copy Organizations" button
      copyButton.addEventListener("click", function () {
        let copyText = "";

        // If the userâ€™s type is valid, copy those two orgs
        if (activistTypes[storedType] && activistTypes[storedType].organizations) {
          activistTypes[storedType].organizations.forEach(org => {
            copyText += `${org.name}: ${org.link}\n`;
          });
        }

        // Also copy each selected focusâ€™s link
        selectedFocuses.forEach(focusName => {
          const match = focusMapping.find(f => f.name === focusName);
          if (match) {
            copyText += `${match.name}: ${match.link}\n`;
          }
        });

        // Write to clipboard
        navigator.clipboard.writeText(copyText)
          .then(() => alert("Organizations copied to clipboard!"))
          .catch(() => alert("Failed to copy organizations."));
      });
    });
  </script>
</body>
</html>
