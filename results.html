<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quiz Results</title>
  <link rel="stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* Center the container */
    .container {
      text-align: center;
    }
    /* Constrain the text width for nicer reading */
    .info-text {
      max-width: 550px;
      margin: 0 auto 15px auto;
      font-size: 16px;
      color: #333;
      line-height: 1.4;
    }
    /* Style the persona image */
    #persona-image {
      max-width: 300px;
      border-radius: 10px;
      margin: 15px auto;
      display: block;
    }
    /* Style for the focus icons container */
    .volunteer-button {
      display: inline-block;
      text-decoration: none;
      color: #000;
      margin: 10px;
      padding: 5px;
      border: 2px solid transparent;
      border-radius: 8px;
      transition: border-color 0.3s ease, transform 0.3s ease;
      cursor: pointer;
      width: 110px; /* adjust as needed */
      text-align: center;
      vertical-align: top; /* so multiple icons line up nicely */
    }
    .volunteer-button:hover {
      border-color: #007BFF;
      transform: scale(1.05);
    }
    .focus-icon {
      width: 80px;
      height: auto;
      border-radius: 8px;
      display: block;
      margin: 0 auto;
    }
    /* Explanation text under each focus icon */
    .focus-explanation {
      font-size: 14px;
      color: #333;
      margin: 5px 0 0;
    }
    /* Center the "Copy Organizations" button */
    #copy-button {
      margin: 20px auto;
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Your Activist Type</h1>

    <div id="result-container" style="display:none;">
      <!-- Title and Description -->
      <h2 id="result-title"></h2>
      <p id="result-description" class="info-text"></p>
      <img id="persona-image" src="" alt="Your Activist Persona" />

      <!-- Issue Focus Actions -->
      <h3>Issue Focus Actions</h3>
      <div id="issue-focus-container" class="button-group">
        <!-- Focus icons + explanations get appended here via JS -->
      </div>

      <!-- Quick Activist Actions -->
      <h3>Quick Activist Actions</h3>
      <div class="button-group">
        <a href="#" id="org1" class="result-btn green" target="_blank">Action 1</a>
        <a href="#" id="org2" class="result-btn green" target="_blank">Action 2</a>
      </div>

      <!-- Deeper Engagement -->
      <h3>Deeper Engagement</h3>
      <div class="button-group">
        <a href="https://upliftservicenetwork.com/activist-matching/" class="result-btn blue" target="_blank">Get Matched</a>
        <a href="https://upliftservicenetwork.com/log-in-2/" class="result-btn blue" target="_blank">Learn More</a>
      </div>

      <!-- Copy Organizations Button -->
      <button id="copy-button" class="result-btn green">Copy Organizations</button>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // 1) Retrieve the user's type & focuses from localStorage
      const storedType = localStorage.getItem("activistType") || "Uncategorized";
      const selectedFocuses = JSON.parse(localStorage.getItem("activistFocus")) || [];

      // 2) Grab references to the DOM
      const resultContainer = document.getElementById("result-container");
      const resultTitle = document.getElementById("result-title");
      const resultDescription = document.getElementById("result-description");
      const resultImage = document.getElementById("persona-image");
      const focusContainer = document.getElementById("issue-focus-container");
      const copyButton = document.getElementById("copy-button");

      // 3) Define your Activist Types (with 2 Quick-Action orgs each)
      const activistTypes = {
        "Resource Builder": {
          emoji: "ðŸ’°",
          description: "You provide the funding, materials, and resources that movements need to thrive.",
          image: "images/resource_builder.png",
          organizations: [
            { name: "World Central Kitchen", link: "https://wck.org/fundraise" },
            { name: "Trevor Project Fundraiser", link: "https://www.thetrevorproject.org/fundraise/" }
          ]
        },
        "Frontline Mobilizer": {
          emoji: "ðŸ”¥",
          description: "You are the spark that ignites change! When injustice strikes, you step upâ€”marching, protesting, and standing boldly on the front lines.",
          image: "images/frontline_firestarter.png",
          organizations: [
            { name: "Black Lives Matter", link: "https://blacklivesmatter.com/take-action/" },
            { name: "Sunrise Movement", link: "https://www.sunrisemovement.org/take-action/" }
          ]
        },
        // ... fill in for other 5 types as well ...
      };

      // 4) Define the 15 focus areas, each with a short "explanation"
      const focusMapping = [
        {
          name: "Healthcare Reform",
          image: "images/healthcare_reform.png",
          link: "https://www.pih.org/get-involved",
          explanation: "Expanding access to quality, affordable healthcare."
        },
        {
          name: "Criminal Justice",
          image: "images/criminal_justice.png",
          link: "https://www.sentencingproject.org/advocacy/get-involved/",
          explanation: "Addressing mass incarceration and promoting restorative justice."
        },
        {
          name: "Education Rights",
          image: "images/education_rights.png",
          link: "https://www.communitiesinschools.org/ways-to-get-involved/",
          explanation: "Ensuring every child has access to equitable education."
        },
        // ... and so on for all 15 ...
      ];

      // 5) Display the userâ€™s Activist Type
      if (activistTypes[storedType]) {
        // Show "emoji + type" as the heading
        const typeData = activistTypes[storedType];
        resultTitle.textContent = `${typeData.emoji} ${storedType}`;
        resultDescription.textContent = typeData.description;
        resultImage.src = typeData.image;

        // Populate the two Quick Activist Actions
        const [org1, org2] = typeData.organizations;
        document.getElementById("org1").textContent = org1.name;
        document.getElementById("org1").href = org1.link;
        document.getElementById("org2").textContent = org2.name;
        document.getElementById("org2").href = org2.link;
      } else {
        // No match
        resultTitle.textContent = storedType;
        resultDescription.textContent = "We couldn't match your activist style. Please try again.";
        resultImage.style.display = "none";
      }

      // 6) Show the userâ€™s chosen focuses (Issue Focus Actions)
      selectedFocuses.forEach(focusName => {
        const match = focusMapping.find(f => f.name === focusName);
        if (match) {
          // Create a clickable icon with explanation beneath
          const volunteerLink = document.createElement("a");
          volunteerLink.href = match.link;
          volunteerLink.target = "_blank";
          volunteerLink.classList.add("volunteer-button");

          volunteerLink.innerHTML = `
            <img src="${match.image}" alt="${match.name}" class="focus-icon"/>
            <p><strong>${match.name}</strong></p>
            <p class="focus-explanation">${match.explanation}</p>
          `;

          focusContainer.appendChild(volunteerLink);
        }
      });

      // 7) Reveal the container
      resultContainer.style.display = "block";

      // 8) "Copy Organizations" button
      copyButton.addEventListener("click", function () {
        let copyText = "";

        // Copy the two quick-action orgs
        if (activistTypes[storedType] && activistTypes[storedType].organizations) {
          activistTypes[storedType].organizations.forEach(org => {
            copyText += `${org.name}: ${org.link}\n`;
          });
        }
        // Copy each selected focus link
        selectedFocuses.forEach(focusName => {
          const match = focusMapping.find(f => f.name === focusName);
          if (match) {
            copyText += `${match.name}: ${match.link}\n`;
          }
        });

        // Write to clipboard
        navigator.clipboard.writeText(copyText)
          .then(() => alert("Organizations copied to clipboard!"))
          .catch(() => alert("Failed to copy organizations."));
      });
    });
  </script>
</body>
</html>
